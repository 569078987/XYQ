<!DOCTYPE html>
<html>
<head>
<style type="text/css">
</style>
</head>
<body>
</body>
<script type="text/javascript">
var amount = 100; // cent
var n = 10;

var weights = []
var total = 0
for(var i = 0; i < n; i++) {
    var weight = Math.random();
    weights.push(weight);
    total += weight;
}

var balance = amount;
var count = n;

var takes = [];
while(count > 0) {
    var weight = weights[n - count];
    var take = Math.ceil(weight / total * amount);
    take = Math.max(1, Math.min(take, balance - (count - 1)));

    takes.push(take);
    balance -= take;
    count -= 1;
}
console.log(takes)
</script>
</html>